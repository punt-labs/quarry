{"id":"ocr-1fi","title":"Epic 6: Multi-Index Management","description":"First-class support for organizing documents into collections.\n\n- Named indices with isolated storage\n- Per-index configuration (embedding model, chunk size)\n- Cross-index search\n- Index metadata and statistics","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T09:19:18.015614-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T18:45:07.315467-08:00","closed_at":"2026-02-08T18:45:07.315467-08:00","close_reason":"Epic 6 complete: collections support across model, database, pipeline, MCP, and CLI. 8 commits, 198 tests."}
{"id":"ocr-1ke","title":"Epic: Local OCR Backend","description":"Make the OCR backend pluggable so quarry can run without AWS credentials.\n\n## Motivation\n- Eliminates AWS dependency and per-page cost ($1.50/1000 pages)\n- Enables offline use\n- Simpler setup (no IAM, S3 bucket, or credentials needed)\n\n## Approach\n- Define an OcrBackend protocol with two operations: sync single-page OCR and async multi-page OCR\n- Implement TextractBackend (existing code in ocr_client.py)\n- Implement LocalBackend wrapping a local engine (PaddleOCR, EasyOCR, or Tesseract)\n- Add OCR_BACKEND setting (default: \"textract\", alternative: \"local\")\n- Pipeline calls backend through protocol, no other changes needed\n\n## Candidates\n- PaddleOCR: best accuracy, ~100MB models, CPU or GPU\n- EasyOCR: good accuracy, PyTorch-based, ~200MB models\n- Tesseract: simplest install, weakest accuracy on noisy/skewed scans\n\n## Open Questions\n- Which local engine? PaddleOCR has best benchmarks but adds PaddlePaddle dependency\n- Should local be an optional extra (quarry-mcp[local])?\n- Acceptable accuracy threshold for handwritten/skewed documents?","status":"open","priority":4,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-09T05:00:53.494075-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:00:53.494075-08:00"}
{"id":"ocr-42y","title":"HTML ingestion","description":"Ingest saved HTML files. Strip boilerplate/nav/scripts, extract article content. Library: beautifulsoup4. Straightforward text extraction.","status":"open","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T05:36:29.715704-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:36:29.715704-08:00"}
{"id":"ocr-4ry","title":"Fix f-string log formatting in pipeline.py","description":"pipeline.py has 11 progress() calls using f-strings that pass through _make_progress() to logger.info(message). This defeats lazy evaluation. Refactor _make_progress to accept format string + args, or convert callers to use %s-style formatting. See NON-FUNCTIONAL-DESIGN.md logging format standard.","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T12:11:59.136548-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T12:30:15.66313-08:00","closed_at":"2026-02-08T12:30:15.66313-08:00","close_reason":"Closed"}
{"id":"ocr-62k","title":"Epic 8: Ingestion Performance","description":"Scalable ingestion for 1000s of documents. Content hashing for skip-if-unchanged, directory registration with incremental re-indexing, parallel multi-document ingestion, exponential backoff for Textract polling. Depends on Epic 6 (complete).","status":"closed","priority":1,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-08T19:41:16.158214-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T04:50:06.993624-08:00","closed_at":"2026-02-09T04:50:06.993624-08:00","close_reason":"Merged PR #1: directory registration, incremental sync, exponential backoff, CLI/MCP tools. 245 unit + 21 integration tests."}
{"id":"ocr-66p","title":"Epic 7: Package Distribution and CLI Setup","description":"Turn quarry-mcp into a proper installable Python package with setup/diagnostic CLI commands.\n\n## Package Distribution\n- Publish to PyPI (or at minimum, installable via `pip install .` / `uv pip install .`)\n- Entry point script so `quarry` command works after install (no `uv run python -m quarry`)\n- Clean dependency specification in pyproject.toml (separate core vs optional deps)\n\n## CLI Commands\n- `quarry install`: First-run setup — download embedding model, create data directory, verify AWS credentials, configure MCP server registration\n- `quarry doctor`: Diagnostic command — check Python version, verify dependencies installed, test AWS connectivity, verify embedding model cached, check LanceDB path writable, report MCP server status","status":"closed","priority":2,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-08T13:43:59.64367-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T13:59:31.50876-08:00","closed_at":"2026-02-08T13:59:31.50876-08:00","close_reason":"Implemented: version management, data path fix, doctor command, install command"}
{"id":"ocr-77n","title":"Skip macOS resource fork files (._*) and .Trash during sync","description":"Sync walker picks up macOS ._* resource fork files and .Trash directories. These cause 'Failed to open file' errors (14 files) and Textract InvalidParameter errors (9 files from .Trash PNGs). Fix: skip files matching ._* prefix and .Trash directories in the directory walker.","status":"closed","priority":1,"issue_type":"bug","owner":"jmf@pobox.com","created_at":"2026-02-09T07:56:04.312826-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T08:24:45.831592-08:00","closed_at":"2026-02-09T08:24:45.831592-08:00","close_reason":"Fixed in PR #4. discover_files now skips dotfiles, resource forks, and hidden directories."}
{"id":"ocr-7ua","title":"Rename beads prefix from ocr- to quarry-","description":"Beads issues use ocr- prefix from the original project name. Project is now quarry-mcp. Rename prefix to quarry- for consistency. Check if bd supports prefix migration or if issues need manual recreation.","status":"open","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T07:17:57.450816-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T07:17:57.450816-08:00"}
{"id":"ocr-8nu","title":"Sitemap crawling for bulk URL ingestion","description":"Parse sitemap.xml to discover URLs, then batch-ingest each page using URL ingestion. Supports documentation sites, blogs, reference manuals. Depends on URL ingestion feature. Add as MCP tool (ingest_sitemap) and CLI command.","status":"open","priority":4,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-09T11:43:00.146025-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T11:43:00.146025-08:00","dependencies":[{"issue_id":"ocr-8nu","depends_on_id":"ocr-pcr","type":"blocks","created_at":"2026-02-09T11:43:08.895941-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"ocr-91r","title":"XLSX/XLS spreadsheet ingestion","description":"Ingest Excel spreadsheets into quarry.\n\n## Design Decisions Needed\n- Chunking strategy: one chunk per sheet, or split large sheets by row groups with headers repeated\n- How to serialize tabular data: markdown tables vs CSV-style text\n- Library: openpyxl (XLSX), xlrd (legacy XLS)\n- Handling of merged cells, formulas (value only vs formula text), multiple sheets\n\n## Scope\n- New parser in text_processor.py or dedicated spreadsheet_processor.py\n- Add .xlsx, .xls to SUPPORTED_EXTENSIONS\n- Feed parsed text into existing chunk-embed-store pipeline\n- No new protocol needed","status":"open","priority":2,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-09T05:35:40.729921-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:36:14.261043-08:00"}
{"id":"ocr-a9v","title":"Backend abstraction Phase 1: Protocols, implementations, factory","description":"Extract OcrBackend and EmbeddingBackend protocols from existing code. Wrap current functions in backend classes. Create factory with caching.\n\n## Scope (from docs/BACKEND-ABSTRACTION.md Phase 1)\n\n1. Add OcrBackend and EmbeddingBackend protocols to types.py\n2. Add TextractOcrBackend class to ocr_client.py (wraps ocr_document_via_s3, ocr_image_bytes)\n3. Add SnowflakeEmbeddingBackend class to embeddings.py (wraps embed_texts, embed_query, owns model cache)\n4. Create backends.py with get_ocr_backend() and get_embedding_backend() factory functions\n5. Add ocr_backend setting to config.py\n6. Tests for new classes and factory\n\n## Files\n\n- src/quarry/types.py — MODIFY (add 2 protocols)\n- src/quarry/ocr_client.py — MODIFY (add TextractOcrBackend class)\n- src/quarry/embeddings.py — MODIFY (add SnowflakeEmbeddingBackend class)\n- src/quarry/backends.py — NEW (~40 lines)\n- src/quarry/config.py — MODIFY (add ocr_backend field)\n- tests/test_backends.py — NEW\n\n## Does NOT include\n\n- Pipeline wiring (Phase 2)\n- MCP/CLI call-site changes (Phase 2)\n- Audio transcription protocol (Phase 3)\n- Local OCR implementation (Phase 4)","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T05:30:41.904627-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T06:14:17.766994-08:00","closed_at":"2026-02-09T06:14:17.766994-08:00","close_reason":"Phase 1 complete: 2 protocols, 2 backend classes, thread-safe factory, 12 tests"}
{"id":"ocr-axj","title":"Epic 2: Text Document Ingestion","description":"Direct ingestion of text-based formats without OCR.\n\n- Plain text files (.txt)\n- Markdown (.md)\n- LaTeX (.tex)\n- DOCX (via python-docx or similar)\n- Configurable page/section boundary detection\n- String ingestion: ingest raw text/markdown/HTML from clipboard, web pages, or chat context (no file required)","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T09:19:14.846313-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T11:11:59.562506-08:00","closed_at":"2026-02-08T11:11:59.562506-08:00","close_reason":"Text document ingestion implemented: .txt, .md, .tex, .docx files + raw string ingestion via MCP"}
{"id":"ocr-bez","title":"Email ingestion (EML/MBOX)","description":"Ingest email files into quarry.\n\n## Approach\n- stdlib email module parses EML and MBOX formats\n- Extract: subject, from, to, date, body (plain text and/or HTML→text)\n- Recurse into attachments: ingest supported formats (PDF, DOCX, images, etc.) as separate documents\n- One chunk per email message, or split long bodies\n- MBOX files contain multiple messages — each becomes a separate document or chunk\n\n## Scope\n- New parser module or addition to text_processor.py\n- Add .eml, .mbox to SUPPORTED_EXTENSIONS\n- Attachment handling reuses existing ingest_document pipeline\n- No new dependencies (stdlib email, html.parser)\n- No new protocol needed","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T05:36:21.19669-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:36:21.19669-08:00"}
{"id":"ocr-bsj","title":"Handle concurrent table creation race condition","description":"First file in sync fails with 'Table ocr_chunks already exists' when multiple workers try to create the table simultaneously. Fix: use create-if-not-exists pattern or catch the error and retry.","status":"open","priority":2,"issue_type":"bug","owner":"jmf@pobox.com","created_at":"2026-02-09T07:56:11.466845-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T07:56:11.466845-08:00"}
{"id":"ocr-bww","title":"Add missing Raises: docstring sections","description":"Multiple public functions raise or propagate exceptions but lack Raises: docstring sections. Files: ocr_client.py (ocr_pdf_pages), embeddings.py (embed_texts, embed_query), database.py (get_db, insert_chunks, search, get_page_text, delete_document), text_processor.py (process_text_file — missing FileNotFoundError, UnicodeDecodeError), pdf_analyzer.py (analyze_pdf), text_extractor.py (extract_text_pages). See NON-FUNCTIONAL-DESIGN.md Rule 5.","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T12:11:59.136979-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T12:30:15.667497-08:00","closed_at":"2026-02-08T12:30:15.667497-08:00","close_reason":"Closed"}
{"id":"ocr-cdv","title":"Add status/health tool to MCP server","description":"local-rag exposes a status tool (document count, chunk count, memory usage, search mode). Quarry should expose similar diagnostics.\n\n- Total documents and chunks\n- Database path and size on disk\n- Embedding model name and dimension\n- Uptime or version","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T10:12:58.767725-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T10:29:34.964385-08:00","closed_at":"2026-02-08T10:29:34.964385-08:00","close_reason":"Closed"}
{"id":"ocr-cjs","title":"Add exception handling at system boundaries","description":"All 6 MCP tool handlers in mcp_server.py and all 4 CLI commands in __main__.py let raw tracebacks escape to users. Each boundary handler should catch expected exceptions (FileNotFoundError, ValueError, RuntimeError, TimeoutError), log with logger.exception(), and return user-friendly messages. See NON-FUNCTIONAL-DESIGN.md Rule 7.","status":"closed","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T12:11:59.13632-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T12:21:55.714433-08:00","closed_at":"2026-02-08T12:21:55.714433-08:00","close_reason":"Closed"}
{"id":"ocr-dcg","title":"Source code language-aware ingestion","description":"Source code already works as .txt but chunking is naive. Language-aware splitting by function/class boundaries would produce better semantic chunks. Tree-sitter or simple regex-based splitting. Low priority — code search is a different problem space.","status":"open","priority":4,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T05:36:30.07829-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:36:30.07829-08:00"}
{"id":"ocr-ebv","title":"PPTX/PPT presentation ingestion","description":"Ingest PowerPoint presentations into quarry.\n\n## Design Decisions Needed\n- Slide text + speaker notes: concatenate per slide, or separate chunks\n- Embedded images: OCR via OcrBackend, or skip initially\n- Charts: rendered as images in the file; text extraction is lossy. OCR or skip.\n- Library: python-pptx\n- Natural chunk boundary: one slide = one chunk with notes appended\n\n## Scope\n- New parser (presentation_processor.py or similar)\n- Add .pptx, .ppt to SUPPORTED_EXTENSIONS\n- Feed parsed text into existing chunk-embed-store pipeline\n- Embedded image OCR ties into OcrBackend protocol (Phase 1/2 dependency)\n- No new protocol needed","status":"open","priority":2,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-09T05:36:14.380605-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:36:14.380605-08:00"}
{"id":"ocr-ekd","title":"Fix resource leaks: try/finally around fitz.open","description":"pdf_analyzer.py:14 and text_extractor.py:25 open fitz.open() without try/finally. If an exception occurs during page iteration, the PDF handle leaks. Wrap in try/finally with doc.close() in the finally block. See NON-FUNCTIONAL-DESIGN.md Rule 6.","status":"closed","priority":1,"issue_type":"bug","owner":"jmf@pobox.com","created_at":"2026-02-08T12:11:59.143001-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T12:21:55.712416-08:00","closed_at":"2026-02-08T12:21:55.712416-08:00","close_reason":"Closed"}
{"id":"ocr-ewr","title":"Google Drive integration","description":"Native Google Drive API integration for registering and syncing Google Drive folders as collections. Authenticate via OAuth2 or service account. Download files to temp storage, ingest, track sync state in registry. Supports Docs, Sheets, Slides (export as DOCX/XLSX/PPTX). Note: Google Drive for Desktop mounts work today with quarry register as a workaround.","status":"open","priority":4,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-09T11:43:04.971154-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T11:43:04.971154-08:00"}
{"id":"ocr-jlo","title":"Epic 3: Image Format Support","description":"OCR for standalone image files (not wrapped in PDF).\n\n- Common formats: PNG, JPG, TIFF, BMP, WebP\n- Single-image and batch ingestion\n- Image preprocessing for OCR quality (deskew, contrast)","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T09:19:15.290644-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T12:55:01.240407-08:00","closed_at":"2026-02-08T12:55:01.240407-08:00","close_reason":"Closed"}
{"id":"ocr-k7h","title":"Expose delete_document via MCP and CLI","description":"The database layer has delete_document() but it is not exposed through the MCP server or CLI. local-rag exposes delete_file — quarry should too.\n\n- Add delete_document tool to MCP server\n- Add 'quarry delete \u003cdocument_name\u003e' CLI command\n- Confirm deletion returns feedback (e.g. chunk count removed)","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T10:12:56.56393-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T10:29:34.962562-08:00","closed_at":"2026-02-08T10:29:34.962562-08:00","close_reason":"Closed"}
{"id":"ocr-kfb","title":"Epic 5: Ingestion Quality","description":"Post-processing to improve extracted text quality.\n\n- LLM-based OCR error correction\n- Chunk quality scoring and filtering\n- Duplicate and near-duplicate detection\n- Table and figure extraction","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T09:19:17.214071-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T09:19:17.214071-08:00"}
{"id":"ocr-kog","title":"EPUB ingestion","description":"Ingest EPUB ebooks. HTML chapters, strip tags, section-aware splitting. Library: ebooklib. Straightforward — same pipeline as DOCX.","status":"open","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T05:36:29.596769-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:36:29.596769-08:00"}
{"id":"ocr-l5s","title":"Add DEBUG logging to database search/query functions","description":"database.py search() and get_page_text() lack DEBUG logging. Add logger.debug for query parameters (limit, document_filter) and result counts. See NON-FUNCTIONAL-DESIGN.md DEBUG-level standard.","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T12:11:59.139247-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T12:30:15.666118-08:00","closed_at":"2026-02-08T12:30:15.666118-08:00","close_reason":"Closed"}
{"id":"ocr-lh5","title":"Epic 4: Audio Transcription","description":"Speech-to-text ingestion for audio content.\n\n- Audio format support: MP3, WAV, M4A, FLAC\n- AWS Transcribe or Whisper integration\n- Speaker diarization\n- Timestamped chunks for source reference","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T09:19:16.247327-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T09:19:16.247327-08:00"}
{"id":"ocr-m70","title":"Backend abstraction Phase 2: Pipeline wiring","description":"Replace direct function calls with factory calls. All call sites go through get_ocr_backend() and get_embedding_backend().\n\n## Scope (from docs/BACKEND-ABSTRACTION.md Phase 2)\n\n1. pipeline.py — replace ocr_document_via_s3() and embed_texts() calls with factory calls\n2. mcp_server.py — replace 2 embed_query() calls with get_embedding_backend(settings).embed_query()\n3. __main__.py — replace 1 embed_query() call with get_embedding_backend(settings).embed_query()\n4. Update test mocking (patch factory instead of module functions)\n\n## Files\n\n- src/quarry/pipeline.py — MODIFY\n- src/quarry/mcp_server.py — MODIFY\n- src/quarry/__main__.py — MODIFY\n- tests/test_pipeline.py — MODIFY (mock factory)\n- tests/test_pipeline_images.py — MODIFY (mock factory)\n- tests/test_mcp_server.py — MODIFY (mock factory)\n- tests/test_cli.py — MODIFY (mock factory)\n\n## Depends on\n\nPhase 1 (ocr-a9v): protocols, implementations, factory must exist first.","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T05:32:03.207114-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T06:22:21.351143-08:00","closed_at":"2026-02-09T06:22:21.351143-08:00","close_reason":"Pipeline, CLI, and MCP server now use backend factory. All 257 unit tests pass.","dependencies":[{"issue_id":"ocr-m70","depends_on_id":"ocr-a9v","type":"blocks","created_at":"2026-02-09T05:32:05.957727-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"ocr-mo5","title":"Search metadata filters","description":"Add optional filters to search_documents: file type, date range, subdirectory path within a collection. Improves retrieval precision as document count grows toward 10k+. Implement as LanceDB WHERE clauses on existing chunk metadata columns.","status":"open","priority":3,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-09T11:43:01.850212-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T11:43:01.850212-08:00"}
{"id":"ocr-o9k","title":"Add loggers and DEBUG logging to I/O modules","description":"pdf_analyzer.py, text_extractor.py, and text_processor.py do file I/O but have no logger. Add logger = logging.getLogger(__name__) and DEBUG-level logs for: page classification decisions and thresholds (pdf_analyzer), extraction operations (text_extractor), format detection and section split counts (text_processor). See NON-FUNCTIONAL-DESIGN.md.","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-08T12:11:59.141752-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-08T12:30:15.664803-08:00","closed_at":"2026-02-08T12:30:15.664803-08:00","close_reason":"Closed"}
{"id":"ocr-osk","title":"HEIC image ingestion","description":"Add HEIC/HEIF image support. Apple's default camera format — 156 files in the boating library alone. macOS sips can convert to JPEG; Pillow with pillow-heif can handle cross-platform. Needs pipeline recognition of .heic/.heif extensions and conversion to a Textract-supported format (JPEG/PNG) before OCR.","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T07:14:42.241905-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T07:14:48.977802-08:00"}
{"id":"ocr-pcr","title":"URL webpage ingestion","description":"Fetch a URL, extract text from HTML, and ingest as a document. Leverage existing text pipeline (ingest_text). Add as MCP tool (ingest_url) and CLI command. Use requests + beautifulsoup4 or similar for HTML-to-text extraction.","status":"open","priority":3,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-02-09T11:42:58.002882-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T11:42:58.002882-08:00"}
{"id":"ocr-q3r","title":"Schema migration strategy for LanceDB","description":"When the LanceDB schema changes (new columns, type changes), existing databases break with 'No field named X' errors. Need a migration strategy: detect schema version, add missing columns with defaults, or provide a quarry migrate CLI command. Discovered during first real-world sync — old schema lacked 'collection' column.","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T07:16:06.985363-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T07:16:06.985363-08:00"}
{"id":"ocr-r87","title":"Handle non-UTF-8 text file encodings","description":"5 German text files failed with 'utf-8 codec can't decode byte'. These are Latin-1/CP1252 encoded. Fix: detect encoding (chardet or charset-normalizer) and decode accordingly, or fall back to latin-1 when utf-8 fails.","status":"open","priority":2,"issue_type":"bug","owner":"jmf@pobox.com","created_at":"2026-02-09T07:56:09.555844-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T07:56:09.555844-08:00"}
{"id":"ocr-v2y","title":"RTF ingestion","description":"Ingest RTF files. Library: striprtf. Low priority — rare format in practice. Simple text extraction into existing pipeline.","status":"open","priority":4,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T05:36:29.958964-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:36:29.958964-08:00"}
{"id":"ocr-vx9","title":"CSV ingestion","description":"Ingest CSV files. Configurable chunking: row groups with header repeated per chunk. Stdlib csv module. Design choice: chunk size by row count or byte size.","status":"open","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-09T05:36:29.838771-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T05:36:29.838771-08:00"}
{"id":"ocr-z3b","title":"Handle MPO (Multi-Picture Object) JPEG format","description":"40 files failed with 'Unsupported image format: MPO'. These are iPhone JPEG files with MPO container (multi-shot). Pillow identifies them as MPO not JPEG. Fix: extract the primary JPEG frame from MPO files before OCR, similar to how BMP/WebP are already converted to PNG.","status":"open","priority":2,"issue_type":"bug","owner":"jmf@pobox.com","created_at":"2026-02-09T07:56:07.309105-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-09T07:56:07.309105-08:00"}
